<div class="row mb-5">
    <div class="col-md-4 border border-1 d-flex justify-content-center mx-5">
        <img src={{ phone.banner.url }} class="rounded-start" alt="">
    </div>
    <ul class="col-md-6">
        <form id="form" action="{% url 'add_to_cart' phone %}" method="POST">
            {% csrf_token %}
            <div class="form-group mb-3">
                <input type="text" class="w-100 fs-2 border border-0 text-black text-truncate" value="{{ phone }}" disabled>
                <input type="text" class="w-100 fs-4 border border-0 text-black" value="{{ phone.price }} MMKs" disabled>
            </div>
            <div class="form-group d-flex align-items-center fs-5 mb-3">
                <label for="" class="col-md-2" >Storage : </label>
                <input type="text" class="col-md-5 border border-0 text-black" value="{{ phone.storage|upper }}" disabled>
            </div>
            <div class="form-group d-flex align-items-center fs-5 mb-3">
                <label for="" class="col-md-2">RAM : </label>
                <input type="text" class="col-md-5 border border-0 text-black" value="{{ phone.ram|upper }}" disabled>
            </div>
            <div class="form-group d-flex align-items-center fs-5 mb-3 instock-div">
                <label for="" class="col-md-2">Instock : </label>
                <input type="text" class="col-md-5 border border-0 text-black instock-text" value="{{ phone.instock|upper }}" disabled>
            </div>
            <div class="form-group d-flex align-items-center fs-5 mb-3 qty_div">
                <label for="" class="col-md-2">Quantity : </label>
                <select name="quantity" id="" class="bg-transparent p-1 rounded-3" style="width: 100px">
                    {% for quantity in quantity_range %}
                        <option value={{ quantity }} > {{ quantity }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="row btn-gp">
                <button type="button" id="buy-now" class="btn col-md-4 btn-warning me-5 p-4 fw-bold qty-btn">Buy Now</button>
                <button type="button" id="add-to-cart" class="btn col-md-4 border-warning border-2 fw-bold qty-btn">Add to Cart</button>
            </div>
        </form>
    </ul>
</div>

{% comment %} <!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script> {% endcomment %}

<script type="text/javascript">

const form = document.getElementById("form")
const buttons = document.querySelectorAll(".qty-btn")
const btnGp = document.getElementsByClassName("btn-gp")
const qty = document.getElementsByClassName("instock-text")[0].value
const qty_div = document.getElementsByClassName("qty_div")
const instock_div = document.getElementsByClassName("instock-div")

if(qty <= 0 ){
    instock_div[0].innerHTML = `<span class="text-danger">Out of Stock</span>`;
    qty_div[0].remove();
    btnGp[0].remove();
    
}

buttons.forEach(function(each){
    console.log(each)
    each.addEventListener("click", (event) => {
        if(  event.target.id == "buy-now" ){
            form.action = form.action.replace("cart/add_to_cart", "order/order_now")
        }else if( event.target.id == "add-to-cart" ){
            form.action = form.action.replace("order/order_now", "cart/add_to_cart");
        }

        form.submit();
    })
})

</script>